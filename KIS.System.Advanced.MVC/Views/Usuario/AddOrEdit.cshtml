
@model KIS.System.Advanced.MVC.ViewModels.UsuarioVM

<form method="POST" id="form-usuario" autocomplete="off" novalidate="novalidate">
    <input type="hidden" id="idUsuario" value="@Model.IdUsuario">
    <div class="form-group">
        <label class="control-label" for="nome">Nome</label>
        <input type="text" value="@Model.Nome" autocomplete="off" class="form-control col-10" id="nomeUsuario" name="nome" placeholder="Digite o Nome do Usuário">
        @Html.ValidationMessageFor(model => model.Nome)
    </div>
    <div class="form-group">
        <label class="control-label" for="email">E-mail</label>
        <input type="text" value="@Model.Email" autocomplete="off" class="form-control col-10" id="email" name="email" placeholder="seuemail@email.com">
        @Html.ValidationMessageFor(model => model.Email)
    </div>
    <div class="form-group">
        <label class="control-label" for="login">Login</label>
        <input type="text" value="@Model.Login" autocomplete="off" class="form-control col-12" id="login" name="login" placeholder="Digite o Login" novalidate="novalidate">
        @Html.ValidationMessageFor(model => model.Login)
    </div>
    <div class="form-group">
        <label for="funcaoUsuario">Função</label>
        <select value="@Model.Funcao" class="form-control col-4" id="funcaoUsuario" name="funcaoUsuario">
            @{
                if (Model.Funcao == KIS.System.Advanced.Domain.Enums.FuncaoEnum.Gerente)
                {
                    <option value="1" selected>Gerente</option>
                }
                else
                {
                    <option value="1">Gerente</option>
                }
                if (Model.Funcao == KIS.System.Advanced.Domain.Enums.FuncaoEnum.Vendedor)
                {
                    <option value="2" selected>Vendedor</option>
                }
                else
                {
                    <option value="2">Vendedor</option>
                }
            }
        </select>
    </div>
    <div class="form-group">
        <label for="tipoAcesso">Tipo Acesso</label>
        <select value="@Model.TipoAcessos" class="form-control col-4" id="tipoAcesso" name="tipoAcesso">
            @{
                if (Model.TipoAcessos == KIS.System.Advanced.Domain.Enums.TipoAcessoEnum.Admin)
                {
                    <option value="1" selected>Administrador</option>
                }
                else
                {
                    <option value="1">Administrador</option>
                }
                if (Model.TipoAcessos == KIS.System.Advanced.Domain.Enums.TipoAcessoEnum.Vendas)
                {
                    <option value="2" selected>Vendas</option>
                }
                else
                {
                    <option value="2">Vendas</option>
                }
            }
        </select>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger float-left" data-dismiss="modal" onclick="javascript: resetaModal()">Fechar</button>
        <button type="button" id="btnSalvarUsuario" class="btn btn-finalizar" data-dismiss="modal" aria-label="Close" style="width: 70px;">Salvar</button>
    </div>
</form>
<script type="text/javascript">

    $("#btnSalvarUsuario").click(() => {
        let usuario = {
            IdUsuario: $("#idUsuario").val(),
            login: $("#login").val(),
            Nome: $("#nomeUsuario").val(),
            Email: $("#email").val(),
            Funcao: $("#funcaoUsuario").val(),
            TipoAcessos: $("#tipoAcesso").val()
        };
        salvaModel("Usuario", "Save", usuario);
    });

</script>
<script src="~/Scripts/jquery.validate.min.js"></script>
@section scripts {
    @Scripts.Render("~/bundles/jqueryval");
}
